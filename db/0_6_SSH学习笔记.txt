<html><head></head><body><p>OpenSSH 是一种强大的远程登录和数据传输工具，它提供了许多安全功能，如数据加密、身份验证和会话完整性。在本文中，我们将详细介绍 OpenSSH 的基本用法和高级用法。</p><h2 id="基本用法"><a href="https://xeonds.github.io/2023/09/25/ssh-usage/#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95" class="headerlink" title="基本用法"></a>基本用法</h2><h3 id="1-远程登录"><a href="https://xeonds.github.io/2023/09/25/ssh-usage/#1-%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95" class="headerlink" title="1. 远程登录"></a>1. 远程登录</h3><p>OpenSSH 最基本的用法是远程登录。要使用 OpenSSH 进行远程登录，您需要使用以下命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">ssh [options] [username]@[hostname]  </span><br/></pre></td></tr></tbody></table></figure><p>其中，<code>[options]</code> 是可选的参数，例如 <code>-i</code> 指定要使用的私钥文件，<code>-L</code> 指定要使用的本地端口转发，<code>-R</code> 指定要使用的远程端口转发等。<code>[username]</code> 是远程主机的用户名，<code>[hostname]</code> 是远程主机的主机名或 IP 地址。<br/>例如，如果您要使用密钥文件 <code>id_rsa</code> 登录远程主机 <code>example.com</code>，可以使用以下命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">ssh -i id_rsa example.com  </span><br/></pre></td></tr></tbody></table></figure><h3 id="2-传输文件"><a href="https://xeonds.github.io/2023/09/25/ssh-usage/#2-%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6" class="headerlink" title="2. 传输文件"></a>2. 传输文件</h3><p>OpenSSH 还提供了一种安全传输文件的方法，称为 SFTP（SSH 文件传输协议）。要使用 SFTP 传输文件，您需要使用以下命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">sftp [options] [username]@[hostname]  </span><br/></pre></td></tr></tbody></table></figure><p>其中，<code>[options]</code> 是可选的参数，例如 <code>-i</code> 指定要使用的私钥文件，<code>-L</code> 指定要使用的本地端口转发，<code>-R</code> 指定要使用的远程端口转发等。<code>[username]</code> 是远程主机的用户名，<code>[hostname]</code> 是远程主机的主机名或 IP 地址。<br/>例如，如果您要使用密钥文件 <code>id_rsa</code> 将本地文件 <code>file.txt</code> 传输到远程主机 <code>example.com</code>，可以使用以下命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">sftp -i id_rsa example.com  </span><br/></pre></td></tr></tbody></table></figure><h2 id="高级用法"><a href="https://xeonds.github.io/2023/09/25/ssh-usage/#%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95" class="headerlink" title="高级用法"></a>高级用法</h2><h3 id="1-端口转发"><a href="https://xeonds.github.io/2023/09/25/ssh-usage/#1-%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91" class="headerlink" title="1. 端口转发"></a>1. 端口转发</h3><p>OpenSSH 提供了一种称为端口转发的功能，允许您将本地端口与远程端口进行映射。这使得您可以在本地网络上使用远程服务，而无需将服务暴露给外部网络。要使用端口转发，您需要使用以下命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">ssh -L [local_port:]local_host [username]@[hostname]  </span><br/></pre></td></tr></tbody></table></figure><p>其中，<code>[local_port]</code> 是本地端口的名称，<code>local_host</code> 是本地主机的名称或 IP 地址，<code>[username]</code> 是远程主机的用户名，<code>[hostname]</code> 是远程主机的主机名或 IP 地址。<br/>例如，如果您要将本地端口 8080 映射到远程主机的 SSH 服务（端口 22），可以使用以下命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">ssh -L 8080:localhost username@example.com  </span><br/></pre></td></tr></tbody></table></figure><h3 id="2-配置-SSH-密钥"><a href="https://xeonds.github.io/2023/09/25/ssh-usage/#2-%E9%85%8D%E7%BD%AE-SSH-%E5%AF%86%E9%92%A5" class="headerlink" title="2. 配置 SSH 密钥"></a>2. 配置 SSH 密钥</h3><p>为了提高安全性，您可以配置 SSH 密钥，以便在进行远程登录时无需输入密码。要配置 SSH 密钥，您需要使用以下命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">ssh-keygen [options]  </span><br/></pre></td></tr></tbody></table></figure><p>其中，<code>[options]</code> 是可选的参数，例如 <code>-t</code> 指定密钥类型，<code>-C</code> 指定密钥注释等。<br/>例如，如果您要生成一个 RSA 密钥对，可以使用以下命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &#34;your_email@example.com&#34;  </span><br/></pre></td></tr></tbody></table></figure><p>配置完 SSH 密钥后，您需要将公钥添加到远程主机的 <code>authorized_keys</code> 文件中，以便在进行远程登录时无需输入密码。要将公钥添加到远程主机的 <code>authorized_keys</code> 文件中，您可以使用以下命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">ssh-copy-id [username]@[hostname]  </span><br/></pre></td></tr></tbody></table></figure><p>其中，<code>[username]</code> 是远程主机的用户名，<code>[hostname]</code> 是远程主机的主机名或 IP 地址。<br/>例如，如果您要将公钥添加到远程主机 <code>example.com</code> 的 <code>authorized_keys</code> 文件中，可以使用以下命令：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">ssh-copy-id username@example.com  </span><br/></pre></td></tr></tbody></table></figure></body></html>