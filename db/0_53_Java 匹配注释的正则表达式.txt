<html><head></head><body><p>参考<a href="http://iregex.org/blog/uncomment-program-with-regex.html">http://iregex.org/blog/uncomment-program-with-regex.html</a></p><p>通用注释有两种:</p><ol><li><p><code>//</code></p></li><li><p><code>/*......*/</code></p></li></ol><p>通常情况下，行级注释可以这样匹配</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">\/\/[^\n]*</span><br/></pre></td></tr></tbody></table></figure><p>块级别这样</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">\/\*([^\*^\/]*|[\*^\<span class="comment">/*]*|[^\**\/]*)*\*\/</span></span><br/></pre></td></tr></tbody></table></figure><p>或者还可以这样</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">\/\*(\s|.)*?\*\/</span><br/></pre></td></tr></tbody></table></figure><p>不过在特殊情况中，行级别会跟协议前缀冲突，所以还需要特殊处理</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">(?&lt;!http:)\/\/.*</span><br/></pre></td></tr></tbody></table></figure><p>甚至于不限定于http协议</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">(?&lt;!:)\/\/.*</span><br/></pre></td></tr></tbody></table></figure><p>最终处理注释为：</p><figure class="highlight groovy"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** 处理注释 groovy代码  </span></span><br/><span class="line"><span class="comment">* @param text  </span></span><br/><span class="line"><span class="comment">* @return     </span></span><br/><span class="line"><span class="comment">***/</span>  </span><br/><span class="line"><span class="keyword">def</span> removeComment(text) {</span><br/><span class="line"><span class="keyword">return</span> text.replaceAll(<span class="string">&#34;(?&lt;!:)\\/\\/.*|\\/\\*(\\s|.)*?\\*\\/&#34;</span>, <span class="string">&#34;&#34;</span>)  </span><br/><span class="line">}</span><br/></pre></td></tr></tbody></table></figure></body></html>