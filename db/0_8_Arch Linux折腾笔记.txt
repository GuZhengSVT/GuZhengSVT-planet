<html><head></head><body><h2 id="安装"><a href="https://xeonds.github.io/2023/09/05/arch-linux%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/#%E5%AE%89%E8%A3%85" class="headerlink" title="安装"></a>安装</h2><p>参考 Arch Wiki 或者参考这个简化版教程：<a href="https://arch.icekylin.online/">https://arch.icekylin.online/</a>。过程按照教程一步步折腾就ok，只要注意区分清楚各个分区，别不小心把数据分区给格式化了就行。联网是安装Arch的必须项，所以请保持网络畅通。另外，建议<strong>安装镜像最好在安装完成后继续保留着</strong>，应急情况下（比如滚挂了）可以用<code>arch-chroot</code>来应急重装内核之类的。</p><blockquote><p>至于Arch经常被吐槽滚挂了的原因，主要是源自Arch的更新策略比较激进，更新完成后，会直接删除老内核，比起一般的更新策略更容易出现依赖问题造成“滚挂了“。</p></blockquote><p>桌面环境、cn源、透明代理之类的配置，也可以参考上面的教程。关于透明代理，也可以参考<a href="https://blog.linioi.com/posts/clash-on-arch/">这篇文章</a>。</p><h2 id="美化"><a href="https://xeonds.github.io/2023/09/05/arch-linux%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/#%E7%BE%8E%E5%8C%96" class="headerlink" title="美化"></a>美化</h2><p>这点上因人而异。我装了layan主题之后，再换个壁纸，装个latte就差不多了。我的原则是，美化差不多就行，但是前提是别影响到系统性能。</p><h2 id="显示适配"><a href="https://xeonds.github.io/2023/09/05/arch-linux%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/#%E6%98%BE%E7%A4%BA%E9%80%82%E9%85%8D" class="headerlink" title="显示适配"></a>显示适配</h2><p>单显示器的配置很简单，改下dpi缩放就基本ok。如果是多显示器的话，就会复杂一些。参考下面的公式：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设HiDPI显示器的分辨率是AxB，普通分辨率显示器的分辨率是CxD </span></span><br/><span class="line"><span class="comment"># 并且外置显示器的缩放比率是ExF</span></span><br/><span class="line">xrandr --output eDP-1 --auto --output HDMI-1 --auto --panning [C*E]x[D*F]+[A]+0 --scale [E]x[F] --right-of eDP-1</span><br/></pre></td></tr></tbody></table></figure><p>根据上面的公式来设置，基本上能搞定。当然，如果想调整的是内置HiDPI显示器分辨率，就得调整最后<code>panning</code>的A为Ax[A的缩放比率]。</p><h2 id="参考链接"><a href="https://xeonds.github.io/2023/09/05/arch-linux%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li>[1] <a href="https://nmgit.net/2020/139/">Barry的笔记</a></li><li>[2] <a href="https://harttle.land/2019/12/24/auto-xrandr.html">X11 多显示器配置：玩转 XRandR</a></li></ul><h2 id="启用外部ssh连接"><a href="https://xeonds.github.io/2023/09/05/arch-linux%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/#%E5%90%AF%E7%94%A8%E5%A4%96%E9%83%A8ssh%E8%BF%9E%E6%8E%A5" class="headerlink" title="启用外部ssh连接"></a>启用外部ssh连接</h2><p>如果想从外部连接到Arch的电脑上，只要安装了openssh就行。Arch默认不会启动<code>sshd</code>，所以我们得手动开启：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">systemctl start sshd</span><br/></pre></td></tr></tbody></table></figure><h2 id="在命令行连接Wi-Fi"><a href="https://xeonds.github.io/2023/09/05/arch-linux%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/#%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%BF%9E%E6%8E%A5Wi-Fi" class="headerlink" title="在命令行连接Wi-Fi"></a>在命令行连接Wi-Fi</h2><p>在完成安装后，启动NetworkManager：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> --now NetworkManager</span><br/></pre></td></tr></tbody></table></figure><p>然后使用<code>nmcli</code>来连接Wi-Fi：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/></pre></td><td class="code"><pre><span class="line">nmcli dev wifi list</span><br/><span class="line"><span class="comment"># 后面的password部分不指定的话，会自动要求输入</span></span><br/><span class="line">nmcli dev wifi connect <span class="string">&#34;SSID&#34;</span> password <span class="string">&#34;password&#34;</span></span><br/></pre></td></tr></tbody></table></figure><h2 id="使用TimeShift备份系统"><a href="https://xeonds.github.io/2023/09/05/arch-linux%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/#%E4%BD%BF%E7%94%A8TimeShift%E5%A4%87%E4%BB%BD%E7%B3%BB%E7%BB%9F" class="headerlink" title="使用TimeShift备份系统"></a>使用TimeShift备份系统</h2><p>TimeShift是一个很好用的系统备份软件，特别是结合了btrfs之后，备份的体积比借助<code>rsync</code>时更小。</p><p>折腾系统时不时可能滚挂，这种时候有个定期创建的映像就很有用了。</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line">sudo timeshift --list <span class="comment"># 获取快照列表</span></span><br/><span class="line">sudo timeshift --restore --snapshot <span class="string">&#39;20XX-XX-XX_XX-XX-XX&#39;</span> --skip-grub <span class="comment"># 选择一个快照进行还原，并跳过 GRUB 安装，一般来说 GRUB 不需要重新安装</span></span><br/></pre></td></tr></tbody></table></figure><p>如果恢复后无法使用，用安装盘通过<code>arch-chroot</code>进去系统，然后手动更改<code>subvolid</code>来手动修复，或者直接删除<code>subvolid</code>：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取subvolid</span></span><br/><span class="line">sudo btrfs sub list -u /</span><br/><span class="line"><span class="comment"># 编辑,根据自己情况，修复</span></span><br/><span class="line">vim /etc/fstab</span><br/></pre></td></tr></tbody></table></figure><h2 id="重启显示管理器（Xorg-x2F-Wayland）"><a href="https://xeonds.github.io/2023/09/05/arch-linux%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/#%E9%87%8D%E5%90%AF%E6%98%BE%E7%A4%BA%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%88Xorg-x2F-Wayland%EF%BC%89" class="headerlink" title="重启显示管理器（Xorg/Wayland）"></a>重启显示管理器（Xorg/Wayland）</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">sudo systemctl restart display-manager</span><br/></pre></td></tr></tbody></table></figure><h2 id="Vim"><a href="https://xeonds.github.io/2023/09/05/arch-linux%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/#Vim" class="headerlink" title="Vim"></a>Vim</h2><p>装上Arch之后我很快就把Vim装上了。结果发现没法和系统剪贴板联动。在Vim里边检查<code>has(clipboard)</code>之后发现，好像这个Vim不支持剪贴板。</p><p>解决方法：装<code>gvim</code>：<code>sudo pacman -S gvim</code>。会提示你是否卸载Vim，选是，配置不会删除所以放心删。安装完了之后你就会发现Vim还能用，而且剪贴板功能好了：</p><p><img src="https://xeonds.github.io/img/Pasted%20image%2020230926210217.png"/></p><h2 id="桌面目录映射"><a href="https://xeonds.github.io/2023/09/05/arch-linux%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/#%E6%A1%8C%E9%9D%A2%E7%9B%AE%E5%BD%95%E6%98%A0%E5%B0%84" class="headerlink" title="桌面目录映射"></a>桌面目录映射</h2><p>今天看到群里一个老哥家目录下的文件都堆到桌面了，顺便了解了一下关于桌面目录映射的问题。因为有时候中文模式创建的家目录下的文件夹都是中文，那个老哥就是改成英文目录的时候遇到了这个问题。</p><p><code>XDG_DESKTOP_DIR</code>这个环境变量的介绍，在archWiki上也能翻到。</p><blockquote><p><a href="https://wiki.archlinux.org/title/XDG_Base_Directory">XDG_DESKTOP_DIR是一个环境变量，用于指定用户的桌面文件夹的位置。它是XDG Base Directory规范</a><a href="https://wiki.archlinux.org/title/XDG_Base_Directory">1</a><a href="https://wiki.archlinux.org/title/XDG_user_directories">的一部分，该规范定义了一些标准的用户目录，如音乐、图片、下载等，以及一些用于存储配置、缓存、数据和状态的目录。XDG_DESKTOP_DIR的默认值是$HOME/Desktop，但用户可以通过编辑~/.config/user-dirs.dirs文件或使用xdg-user-dirs-update命令来修改它</a><a href="https://wiki.archlinux.org/title/XDG_user_directories">2</a>。</p><p><a href="https://wiki.archlinux.org/title/Desktop_entries">KDE桌面环境遵循XDG Base Directory规范，并使用XDG_DESKTOP_DIR变量来确定桌面文件夹的位置。如果用户更改了XDG_DESKTOP_DIR的值，KDE会自动更新桌面设置，并将桌面文件夹更改为新的位置。这样，用户可以灵活地管理自己的桌面文件夹，而不影响其他应用程序或桌面环境</a><a href="https://wiki.archlinux.org/title/Desktop_entries">3</a>。</p></blockquote><p>所以出问题的话看看<code>.config</code>底下配置炸没炸就行。</p></body></html>