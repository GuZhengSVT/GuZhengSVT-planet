<html><head></head><body><h2 id="问题及解决方案"><a href="https://xiue233.github.io/2024/08/04/conda-openssl-legacy-provider/#%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" class="headerlink" title="问题及解决方案"></a>问题及解决方案</h2><p>使用conda创建一个新环境时出现了：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">Error while loading conda entry point: conda-content-trust (OpenSSL 3.0&#39;s legacy provider failed to load. This is a fatal error by default, but cryptography supports running without legacy algorithms by setting the environment variable CRYPTOGRAPHY_OPENSSL_NO_LEGACY. If you did not expect this error, you have likely made a mistake with your OpenSSL configuration.)</span><br/></pre></td></tr></tbody></table></figure><p>实际上通过配置一个环境变量即可：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">export CRYPTOGRAPHY_OPENSSL_NO_LEGACY=1</span><br/></pre></td></tr></tbody></table></figure><h2 id="问题剖析"><a href="https://xiue233.github.io/2024/08/04/conda-openssl-legacy-provider/#%E9%97%AE%E9%A2%98%E5%89%96%E6%9E%90" class="headerlink" title="问题剖析"></a>问题剖析</h2><p>以下是GPT的回答：</p><p>这个错误消息与OpenSSL 3.0及其提供的遗留加密算法有关。以下是错误的详细解释和解决方法：</p><h3 id="错误详细解释"><a href="https://xiue233.github.io/2024/08/04/conda-openssl-legacy-provider/#%E9%94%99%E8%AF%AF%E8%AF%A6%E7%BB%86%E8%A7%A3%E9%87%8A" class="headerlink" title="错误详细解释"></a>错误详细解释</h3><ul><li><strong>Error while loading conda entry point: conda-content-trust</strong>：这表示加载Conda的特定组件（即<code>conda-content-trust</code>）时出现问题。</li><li><strong>OpenSSL 3.0’s legacy provider failed to load</strong>：OpenSSL 3.0 包含一个“遗留提供者”，其中包含较旧的加密算法。此错误表明该提供者未能加载。</li><li><strong>This is a fatal error by default</strong>：默认情况下，未能加载遗留提供者被认为是一个致命错误。</li><li>**cryptography supports running without legacy algorithms by setting the environment variable <code>CRYPTOGRAPHY_OPENSSL_NO_LEGACY</code>**：<code>cryptography</code>库可以在不使用这些遗留算法的情况下运行，只需设置环境变量<code>CRYPTOGRAPHY_OPENSSL_NO_LEGACY</code>为<code>1</code>。</li><li><strong>If you did not expect this error, you have likely made a mistake with your OpenSSL configuration</strong>：此错误可能是由于你的系统上的OpenSSL配置不正确造成的。</li></ul><h3 id="解决方法"><a href="https://xiue233.github.io/2024/08/04/conda-openssl-legacy-provider/#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95" class="headerlink" title="解决方法"></a>解决方法</h3><p>要解决此错误，你可以将环境变量<code>CRYPTOGRAPHY_OPENSSL_NO_LEGACY</code>设置为<code>1</code>，这将指示<code>cryptography</code>库跳过遗留算法并在没有它们的情况下运行。</p><h4 id="设置环境变量"><a href="https://xiue233.github.io/2024/08/04/conda-openssl-legacy-provider/#%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" class="headerlink" title="设置环境变量"></a>设置环境变量</h4><ol><li><p><strong>临时解决方案（仅适用于当前会话）</strong>：<br/>打开终端并运行：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CRYPTOGRAPHY_OPENSSL_NO_LEGACY=1</span><br/></pre></td></tr></tbody></table></figure></li><li><p><strong>永久解决方案（适用于所有会话）</strong>：<br/>将该导出命令添加到你的shell配置文件中（例如，<code>~/.bashrc</code>、<code>~/.bash_profile</code>或<code>~/.zshrc</code>，取决于你使用的shell）。例如，如果你使用的是Bash：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#39;export CRYPTOGRAPHY_OPENSSL_NO_LEGACY=1&#39;</span> &gt;&gt; ~/.bashrc</span><br/><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br/></pre></td></tr></tbody></table></figure></li></ol><h3 id="验证和应用步骤"><a href="https://xiue233.github.io/2024/08/04/conda-openssl-legacy-provider/#%E9%AA%8C%E8%AF%81%E5%92%8C%E5%BA%94%E7%94%A8%E6%AD%A5%E9%AA%A4" class="headerlink" title="验证和应用步骤"></a>验证和应用步骤</h3><ol><li>使用上述方法之一设置环境变量。</li><li>重新启动你的终端或使用以下命令重新加载shell配置文件以应用更改：<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc  <span class="comment"># 或者使用适合你的shell配置文件</span></span><br/></pre></td></tr></tbody></table></figure></li><li>再次运行你的Conda命令，看看问题是否解决。</li></ol><p>通过设置<code>CRYPTOGRAPHY_OPENSSL_NO_LEGACY=1</code>，你可以确保<code>cryptography</code>库在不需要OpenSSL的遗留算法的情况下运行，从而防止出现此错误。</p></body></html>