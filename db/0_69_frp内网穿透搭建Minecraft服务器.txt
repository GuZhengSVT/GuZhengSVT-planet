<html><head></head><body><h2 id="原料"><a href="https://mxts.jiujiuer.xyz/2022/06/28/%E6%B8%B8%E6%88%8F/Minecraft/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%90%AD%E5%BB%BAMinecraft%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E5%8E%9F%E6%96%99" class="headerlink" title="原料"></a><del>原料</del></h2><ul><li><a href="https://github.com/fatedier/frp/releases/">frp</a>：这次搭建服务器的核心工具</li><li>一台公网服务器：我用的是腾讯云。性能无所谓</li><li>一台跑mc服务端的电脑：我用的自己的台式机</li><li>一个公网域名：没有的话用服务器IP也行</li></ul><h2 id="准备"><a href="https://mxts.jiujiuer.xyz/2022/06/28/%E6%B8%B8%E6%88%8F/Minecraft/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%90%AD%E5%BB%BAMinecraft%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E5%87%86%E5%A4%87" class="headerlink" title="准备"></a>准备</h2><p>1.开放端口</p><p>Minecraft服务端需要开放<code>25565</code>端口，frp需要开放<code>7000</code>端口作为绑定端口，<code>8080</code>（或者其他闲置端口）作为http端口。如果需要监控面板的话还需要开放<code>7500</code>端口。</p><p>开放时，都选择<code>tcp</code>即可。</p><blockquote><p>上述端口都可以根据实际情况改变</p></blockquote><p>2.下载文件</p><p>从上述frp链接到的GitHub release页面中下载你需要的版本。服务端和客户端是在同一个<code>tar.gz</code>文件中的，所以只需要下载你公网服务器和本地服务器对应的版本即可。</p><blockquote><p>后缀简介：i386:32位系统；amd64：64位系统；linux：Ubuntu等Linux系统；windows：Windows；arm32/64：arm版系统。按需下载即可。速度慢可以搜搜<code>GitHub加速</code></p></blockquote><h2 id="配置"><a href="https://mxts.jiujiuer.xyz/2022/06/28/%E6%B8%B8%E6%88%8F/Minecraft/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%90%AD%E5%BB%BAMinecraft%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E9%85%8D%E7%BD%AE" class="headerlink" title="配置"></a>配置</h2><p>1.公网服务器：随便创建个目录，用<code>tar -zxvf [文件名]</code>解压文件。不会上传到服务器的自行百度<code>scp</code>。解压完成后保留<code>frps</code>和<code>frps.ini</code>即可。使用<code>vim frps.ini</code>编辑配置文件如下：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/></pre></td><td class="code"><pre><span class="line">[common]</span><br/><span class="line">bind_port = 7000</span><br/><span class="line">vhost_http_port = 8080</span><br/><span class="line">token=114514     <span class="comment">#客户端连接密码</span></span><br/><span class="line"><span class="comment">#下面是监控面板的配置，不需要可以忽略</span></span><br/><span class="line">dashboard_addr=0.0.0.0</span><br/><span class="line">dashboard_port=7500     <span class="comment">#监控面板端口。用[你服务器地址]:7500即可访问</span></span><br/><span class="line">dashboard_user=114514 <span class="comment">#监控面板用户名</span></span><br/><span class="line">dashboard_pwd=114514 <span class="comment">#监控面板密码</span></span><br/></pre></td></tr></tbody></table></figure><p>按<code>Esc</code>，输入<code>:wq</code>保存并退出。随后输入<code>screen -dmS frp-server ./frps -c ./frps.ini</code>并回车，创建一个名为<code>frps-server</code>的后台窗口并在其中开启<code>frps</code>服务端。</p><p>OK，<code>exit</code>退出连接即可。</p><p>2.内网服务器：按照其他的教程开启Minecraft服务器即可，具体搜索<code>Minecraft Java开服</code>。确保端口为<code>25565</code>，随后解压<code>frp</code>并保留<code>frpc</code>和<code>frpc.ini</code>并打开<code>frpc.ini</code>，编辑为：</p><figure class="highlight bat"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/></pre></td><td class="code"><pre><span class="line">[common]</span><br/><span class="line">server_addr = [你服务器的地址]</span><br/><span class="line">server_port = <span class="number">7000</span></span><br/><span class="line">token=<span class="number">114514</span></span><br/><span class="line"></span><br/><span class="line">[mcs]</span><br/><span class="line"><span class="built_in">type</span> = tcp</span><br/><span class="line">local_ip = <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span></span><br/><span class="line">local_port = <span class="number">25565</span></span><br/><span class="line">remote_port=<span class="number">25565</span></span><br/></pre></td></tr></tbody></table></figure><p>保存退出。双击运行<code>frpc.exe</code>即可。</p><h2 id="尾声"><a href="https://mxts.jiujiuer.xyz/2022/06/28/%E6%B8%B8%E6%88%8F/Minecraft/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%90%AD%E5%BB%BAMinecraft%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E5%B0%BE%E5%A3%B0" class="headerlink" title="尾声"></a>尾声</h2><p>配好之后按理来说就能玩了。如果有报错的话请Google一下<code>frp+你的报错信息</code>，会有解决办法的。</p><p>啊不对重点不是这个……我们上面用了<code>screen</code>来做中转，这样每次重启服务器都需要手动开启服务很麻烦。可以用service一劳永逸解决这个问题：<a href="https://juejin.cn/post/7042486792011907086">查看本文，教你配置frp为service</a></p></body></html>